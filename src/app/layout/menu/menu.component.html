<aside class="sidebar">
  <!-- Brand -->
  <div class="brand">
    <div class="brand-icon">
      <i class="bi bi-receipt-cutoff"></i>
    </div>

    <div class="brand-text">
      <div class="brand-title">Divino CEO</div>
      <div class="brand-subtitle">Operations Dashboard</div>
    </div>
  </div>

  <!-- Menu -->
  <nav class="menu">
    <ng-container *ngFor="let item of items">
      <!-- Section label -->
      <div *ngIf="item.type === 'section'" class="menu-section">
        {{ item.label }}
      </div>

      <!-- Link item -->
      <a *ngIf="item.type === 'link'" class="menu-link" [routerLink]="item.route" routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: true }">
        <i class="bi menu-ic" [ngClass]="item.icon"></i>
        <span class="menu-text">{{ item.label }}</span>
        <i class="bi bi-chevron-right ms-auto arrow"></i>
      </a>

      <!-- Group item -->
      <button *ngIf="item.type === 'group'" type="button" class="menu-link menu-group" (click)="toggleGroup(item)"
        [class.active]="item.isOpen">
        <i class="bi menu-ic" [ngClass]="item.icon"></i>
        <span class="menu-text">{{ item.label }}</span>
        <i class="bi bi-chevron-down ms-auto chevron" [class.open]="item.isOpen"></i>
      </button>

      <!-- Group children -->
      <div *ngIf="item.type === 'group' && item.isOpen" class="menu-children">
        <a *ngFor="let child of item.children" class="menu-child" [routerLink]="child.route" routerLinkActive="active">
          <i class="bi menu-ic child-ic" [ngClass]="child.icon"></i>
          <span>{{ child.label }}</span>
        </a>
      </div>
    </ng-container>

    <div class="menu-divider"></div>

    <!-- Actions -->
    <button type="button" class="menu-action action-primary" (click)="openChangePassword()">
      <i class="bi bi-shield-lock"></i>
      <span>Change Password</span>
    </button>

    <button type="button" class="menu-action action-danger" (click)="logout()">
      <i class="bi bi-box-arrow-right"></i>
      <span>Log out</span>
    </button>
  </nav>

  <div class="menu-divider"></div>

  <div class="brand">

    <div class="brand-text">
      <div class="brand-title">{{ User?.user_email }}</div>
      <div class="brand-subtitle"> {{ User?.user_name + ' ' + User?.user_apellido }} </div>
      <div class="brand-subtitle"> {{ User?.user_rol == 1 ? 'SYSTEM' : User?.user_rol == 2 ? 'ADMIN' : 'USER' }}</div>
    </div>
  </div>

</aside>
